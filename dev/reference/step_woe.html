<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Weight of evidence transformation — step_woe • embed</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.9/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Weight of evidence transformation — step_woe"><meta name="description" content="step_woe() creates a specification of a recipe step that will transform
nominal data into its numerical transformation based on weights of evidence
against a binary outcome."><meta property="og:description" content="step_woe() creates a specification of a recipe step that will transform
nominal data into its numerical transformation based on weights of evidence
against a binary outcome."><meta property="og:image" content="https://embed.tidymodels.org/logo.png"><meta name="robots" content="noindex"><script defer data-domain="embed.tidymodels.org,all.tidymodels.org" src="https://plausible.io/js/plausible.js"></script></head><body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">embed</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.1.5.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/Applications/GLM.html">Using Generalized Linear Models</a></li>
    <li><a class="dropdown-item" href="../articles/Applications/Tensorflow.html">Entity Embeddings of Categorical Variables using TensorFlow</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/tidymodels/embed/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Weight of evidence transformation</h1>
      <small class="dont-index">Source: <a href="https://github.com/tidymodels/embed/blob/main/R/woe.R" class="external-link"><code>R/woe.R</code></a></small>
      <div class="d-none name"><code>step_woe.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>step_woe()</code> creates a <em>specification</em> of a recipe step that will transform
nominal data into its numerical transformation based on weights of evidence
against a binary outcome.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">step_woe</span><span class="op">(</span></span>
<span>  <span class="va">recipe</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  role <span class="op">=</span> <span class="st">"predictor"</span>,</span>
<span>  <span class="va">outcome</span>,</span>
<span>  trained <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  dictionary <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  Laplace <span class="op">=</span> <span class="fl">1e-06</span>,</span>
<span>  prefix <span class="op">=</span> <span class="st">"woe"</span>,</span>
<span>  keep_original_cols <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  skip <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  id <span class="op">=</span> <span class="fu"><a href="https://recipes.tidymodels.org/reference/rand_id.html" class="external-link">rand_id</a></span><span class="op">(</span><span class="st">"woe"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-recipe">recipe<a class="anchor" aria-label="anchor" href="#arg-recipe"></a></dt>
<dd><p>A recipe object. The step will be added to the sequence of
operations for this recipe.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>One or more selector functions to choose which variables will be
used to compute the components. See <a href="https://recipes.tidymodels.org/reference/selections.html" class="external-link">recipes::selections</a> for more details. For
the <code>tidy</code> method, these are not currently used.</p></dd>


<dt id="arg-role">role<a class="anchor" aria-label="anchor" href="#arg-role"></a></dt>
<dd><p>For model terms created by this step, what analysis role should
they be assigned?. By default, the function assumes that the new woe
components columns created by the original variables will be used as
predictors in a model.</p></dd>


<dt id="arg-outcome">outcome<a class="anchor" aria-label="anchor" href="#arg-outcome"></a></dt>
<dd><p>The bare name of the binary outcome encased in <code><a href="https://ggplot2.tidyverse.org/reference/vars.html" class="external-link">vars()</a></code>.</p></dd>


<dt id="arg-trained">trained<a class="anchor" aria-label="anchor" href="#arg-trained"></a></dt>
<dd><p>A logical to indicate if the quantities for preprocessing have
been estimated.</p></dd>


<dt id="arg-dictionary">dictionary<a class="anchor" aria-label="anchor" href="#arg-dictionary"></a></dt>
<dd><p>A tbl. A map of levels and woe values. It must have the
same layout than the output returned from <code><a href="dictionary.html">dictionary()</a></code>. If <code>NULL</code> the
function will build a dictionary with those variables passed to <code>...</code>.
See <code><a href="dictionary.html">dictionary()</a></code> for details.</p></dd>


<dt id="arg-laplace">Laplace<a class="anchor" aria-label="anchor" href="#arg-laplace"></a></dt>
<dd><p>The Laplace smoothing parameter. A value usually applied to
avoid -Inf/Inf from predictor category with only one outcome class. Set to
0 to allow Inf/-Inf. The default is 1e-6. Also known as 'pseudocount'
parameter of the Laplace smoothing technique.</p></dd>


<dt id="arg-prefix">prefix<a class="anchor" aria-label="anchor" href="#arg-prefix"></a></dt>
<dd><p>A character string that will be the prefix to the resulting new
variables. See notes below.</p></dd>


<dt id="arg-keep-original-cols">keep_original_cols<a class="anchor" aria-label="anchor" href="#arg-keep-original-cols"></a></dt>
<dd><p>A logical to keep the original variables in the
output. Defaults to <code>FALSE</code>.</p></dd>


<dt id="arg-skip">skip<a class="anchor" aria-label="anchor" href="#arg-skip"></a></dt>
<dd><p>A logical. Should the step be skipped when the recipe is baked by
<code><a href="https://recipes.tidymodels.org/reference/bake.html" class="external-link">recipes::bake()</a></code>? While all operations are baked when <code><a href="https://recipes.tidymodels.org/reference/prep.html" class="external-link">recipes::prep()</a></code> is
run, some operations may not be able to be conducted on new data (e.g.
processing the outcome variable(s)). Care should be taken when using <code>skip = TRUE</code> as it may affect the computations for subsequent operations</p></dd>


<dt id="arg-id">id<a class="anchor" aria-label="anchor" href="#arg-id"></a></dt>
<dd><p>A character string that is unique to this step to identify it.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An updated version of <code>recipe</code> with the new step added to the
sequence of existing steps (if any). For the <code>tidy</code> method, a tibble with
the woe dictionary used to map categories with woe values.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>WoE is a transformation of a group of variables that produces a new set of
features. The formula is</p>
<p>$$woe_c = log((P(X = c|Y = 1))/(P(X = c|Y = 0)))$$</p>
<p>where \(c\) goes from 1 to \(C\) levels of a given nominal predictor
variable \(X\).</p>
<p>These components are designed to transform nominal variables into numerical
ones with the property that the order and magnitude reflects the association
with a binary outcome.  To apply it on numerical predictors, it is advisable
to discretize the variables prior to running WoE. Here, each variable will be
binarized to have woe associated later. This can achieved by using
<code><a href="https://recipes.tidymodels.org/reference/step_discretize.html" class="external-link">recipes::step_discretize()</a></code>.</p>
<p>The argument <code>Laplace</code> is an small quantity added to the proportions of 1's
and 0's with the goal to avoid log(p/0) or log(0/p) results. The numerical
woe versions will have names that begin with <code>woe_</code> followed by the
respective original name of the variables. See Good (1985).</p>
<p>One can pass a custom <code>dictionary</code> tibble to <code>step_woe()</code>. It must have
the same structure of the output from <code><a href="dictionary.html">dictionary()</a></code> (see examples). If
not provided it will be created automatically. The role of this tibble is to
store the map between the levels of nominal predictor to its woe values. You
may want to tweak this object with the goal to fix the orders between the
levels of one given predictor. One easy way to do this is by tweaking an
output returned from <code><a href="dictionary.html">dictionary()</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="tidying">Tidying<a class="anchor" aria-label="anchor" href="#tidying"></a></h2>
    <p>When you <code><a href="https://recipes.tidymodels.org/reference/tidy.recipe.html" class="external-link">tidy()</a></code> this step, a tibble with columns <code>terms</code>
(the selectors or variables selected), <code>value</code>, <code>n_tot</code>, <code>n_bad</code>, <code>n_good</code>,
<code>p_bad</code>, <code>p_good</code>, <code>woe</code> and <code>outcome</code> is returned.. See <code><a href="dictionary.html">dictionary()</a></code> for
more information.</p>
<p>When you <code><a href="https://recipes.tidymodels.org/reference/tidy.recipe.html" class="external-link">tidy()</a></code> this step, a tibble is returned with
columns <code>terms</code> <code>value</code>, <code>n_tot</code>, <code>n_bad</code>, <code>n_good</code>, <code>p_bad</code>, <code>p_good</code>, <code>woe</code>
and <code>outcome</code> and <code>id</code>:</p>
<dl><dt>terms</dt>
<dd><p>character, the selectors or variables selected</p></dd>

<dt>value</dt>
<dd><p>character, level of the outcome</p></dd>

<dt>n_tot</dt>
<dd><p>integer, total number</p></dd>

<dt>n_bad</dt>
<dd><p>integer, number of bad examples</p></dd>

<dt>n_good</dt>
<dd><p>integer, number of good examples</p></dd>

<dt>p_bad</dt>
<dd><p>numeric, p of bad examples</p></dd>

<dt>p_good</dt>
<dd><p>numeric, p of good examples</p></dd>

<dt>woe</dt>
<dd><p>numeric, weight of evidence</p></dd>

<dt>outcome</dt>
<dd><p>character, name of outcome variable</p></dd>

<dt>id</dt>
<dd><p>character, id of this step</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="tuning-parameters">Tuning Parameters<a class="anchor" aria-label="anchor" href="#tuning-parameters"></a></h2>
    <p>This step has 1 tuning parameters:</p><ul><li><p><code>Laplace</code>: Laplace Correction (type: double, default: 1e-06)</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="case-weights">Case weights<a class="anchor" aria-label="anchor" href="#case-weights"></a></h2>



<p>The underlying operation does not allow for case weights.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Kullback, S. (1959). <em>Information Theory and Statistics.</em> Wiley, New York.</p>
<p>Hastie, T., Tibshirani, R. and Friedman, J. (1986). <em>Elements of Statistical
Learning</em>, Second Edition, Springer, 2009.</p>
<p>Good, I. J. (1985), "Weight of evidence: A brief survey", <em>Bayesian
Statistics</em>, 2, pp.249-270.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://modeldata.tidymodels.org" class="external-link">modeldata</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"credit_data"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">111</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">in_training</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">credit_data</span><span class="op">)</span>, <span class="fl">2000</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">credit_tr</span> <span class="op">&lt;-</span> <span class="va">credit_data</span><span class="op">[</span><span class="va">in_training</span>, <span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">credit_te</span> <span class="op">&lt;-</span> <span class="va">credit_data</span><span class="op">[</span><span class="op">-</span><span class="va">in_training</span>, <span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">rec</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://recipes.tidymodels.org/reference/recipe.html" class="external-link">recipe</a></span><span class="op">(</span><span class="va">Status</span> <span class="op">~</span> <span class="va">.</span>, data <span class="op">=</span> <span class="va">credit_tr</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">step_woe</span><span class="op">(</span><span class="va">Job</span>, <span class="va">Home</span>, outcome <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">Status</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">woe_models</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://recipes.tidymodels.org/reference/prep.html" class="external-link">prep</a></span><span class="op">(</span><span class="va">rec</span>, training <span class="op">=</span> <span class="va">credit_tr</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Some columns used by `step_woe()` have categories with fewer than 10</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> values: <span style="color: #0000BB;">"Home"</span> and <span style="color: #0000BB;">"Job"</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># the encoding:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://recipes.tidymodels.org/reference/bake.html" class="external-link">bake</a></span><span class="op">(</span><span class="va">woe_models</span>, new_data <span class="op">=</span> <span class="va">credit_te</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></span><span class="op">(</span><span class="st">"woe"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 5 × 2</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   woe_Job woe_Home</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span>  -<span style="color: #BB0000;">0.451</span>   0.519 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span>   0.187  -<span style="color: #BB0000;">0.512</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span>  -<span style="color: #BB0000;">0.451</span>  -<span style="color: #BB0000;">0.512</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span>   0.187  -<span style="color: #BB0000;">0.512</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span>   1.51   -<span style="color: #BB0000;">0.051</span><span style="color: #BB0000; text-decoration: underline;">9</span></span>
<span class="r-in"><span><span class="co"># the original data</span></span></span>
<span class="r-in"><span><span class="va">credit_te</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">Job</span>, <span class="va">Home</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         Job    Home</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     fixed    rent</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 freelance   owner</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     fixed   owner</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 freelance   owner</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   partime parents</span>
<span class="r-in"><span><span class="co"># the details:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html" class="external-link">tidy</a></span><span class="op">(</span><span class="va">woe_models</span>, number <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 12 × 10</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    terms value    n_tot n_bad n_good   p_bad  p_good     woe outcome id   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> Job   fixed     <span style="text-decoration: underline;">1</span>261   273    988 0.451   0.708   -<span style="color: #BB0000;">0.451</span>  Status  woe_…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> Job   freelan…   463   159    304 0.263   0.218    0.187  Status  woe_…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> Job   others      74    39     35 0.064<span style="text-decoration: underline;">5</span>  0.025<span style="text-decoration: underline;">1</span>   0.944  Status  woe_…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> Job   partime    201   133     68 0.220   0.048<span style="text-decoration: underline;">7</span>   1.51   Status  woe_…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> Job   <span style="color: #BB0000;">NA</span>           1     1      0 0.001<span style="text-decoration: underline;">65</span> 0       14.7    Status  woe_…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> Home  ignore       8     4      4 0.006<span style="text-decoration: underline;">61</span> 0.002<span style="text-decoration: underline;">87</span>  0.835  Status  woe_…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> Home  other      161    78     83 0.129   0.059<span style="text-decoration: underline;">5</span>   0.773  Status  woe_…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> Home  owner      931   192    739 0.317   0.530   -<span style="color: #BB0000;">0.512</span>  Status  woe_…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> Home  parents    336    98    238 0.162   0.171   -<span style="color: #BB0000;">0.051</span><span style="color: #BB0000; text-decoration: underline;">9</span> Status  woe_…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> Home  priv       113    42     71 0.069<span style="text-decoration: underline;">4</span>  0.050<span style="text-decoration: underline;">9</span>   0.310  Status  woe_…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">11</span> Home  rent       446   188    258 0.311   0.185    0.519  Status  woe_…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">12</span> Home  <span style="color: #BB0000;">NA</span>           5     3      2 0.004<span style="text-decoration: underline;">96</span> 0.001<span style="text-decoration: underline;">43</span>  1.24   Status  woe_…</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example of custom dictionary + tweaking</span></span></span>
<span class="r-in"><span><span class="co"># custom dictionary</span></span></span>
<span class="r-in"><span><span class="va">woe_dict_custom</span> <span class="op">&lt;-</span> <span class="va">credit_tr</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="dictionary.html">dictionary</a></span><span class="op">(</span><span class="va">Job</span>, <span class="va">Home</span>, outcome <span class="op">=</span> <span class="st">"Status"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">woe_dict_custom</span><span class="op">[</span><span class="fl">4</span>, <span class="st">"woe"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">1.23</span> <span class="co"># tweak</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># passing custom dict to step_woe()</span></span></span>
<span class="r-in"><span><span class="va">rec_custom</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://recipes.tidymodels.org/reference/recipe.html" class="external-link">recipe</a></span><span class="op">(</span><span class="va">Status</span> <span class="op">~</span> <span class="va">.</span>, data <span class="op">=</span> <span class="va">credit_tr</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">step_woe</span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="va">Job</span>, <span class="va">Home</span>,</span></span>
<span class="r-in"><span>    outcome <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">Status</span><span class="op">)</span>, dictionary <span class="op">=</span> <span class="va">woe_dict_custom</span></span></span>
<span class="r-in"><span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://recipes.tidymodels.org/reference/prep.html" class="external-link">prep</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Some columns used by `step_woe()` have categories with fewer than 10</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> values: <span style="color: #0000BB;">"Home"</span> and <span style="color: #0000BB;">"Job"</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">rec_custom_baked</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://recipes.tidymodels.org/reference/bake.html" class="external-link">bake</a></span><span class="op">(</span><span class="va">rec_custom</span>, new_data <span class="op">=</span> <span class="va">credit_te</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">rec_custom_baked</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">woe_Job</span> <span class="op">==</span> <span class="fl">1.23</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 6 × 14</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Seniority  Time   Age Marital Records Expenses Income Assets  Debt</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span>         0    48    41 married no            90     80      0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span>         0    18    21 single  yes           35     50      0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span>         0    36    23 single  no            45    122   <span style="text-decoration: underline;">2</span>500     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span>        14    24    51 married no            75    198   <span style="text-decoration: underline;">1</span>000     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span>         1    60    26 single  no            35    120      0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">6</span>         1    36    24 married no            76    164      0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 5 more variables: Amount &lt;int&gt;, Price &lt;int&gt;, Status &lt;fct&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   woe_Job &lt;dbl&gt;, woe_Home &lt;dbl&gt;</span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by Emil Hvitfeldt, <a href="https://github.com/topepo" class="external-link">Max Kuhn</a>, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

  </div></footer></body></html>

